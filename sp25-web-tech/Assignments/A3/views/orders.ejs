<!DOCTYPE html>
<html>
    <head>
        <title>Your Orders</title>
        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <style>
            .header-bar {
                background-color: #0a7518; /* Darker green */
                color: white;
                padding: 20px;
                margin-bottom: 30px;
            }

            .order-header {
                background-color: #06325b; /* Darker blue for order card */
            }
        </style>
    </head>
    <body class="bg-light">
        <!-- Full width header -->
        <div class="container-fluid header-bar">
            <h1 class="text-center m-0">Your Orders</h1>
        </div>

        <div class="container">
            <% if (orders.length === 0) { %>
            <div class="alert alert-warning mt-4">No orders found.</div>
            <% } else { %> <% orders.forEach(order => { let orderTotal = 0; %>
            <div class="card mb-4 shadow-sm">
                <div class="card-header text-white order-header">
                    <strong>Order ID:</strong> <%= order._id %> <br />
                    <strong>Date:</strong> <%= order.createdAt.toDateString() %>
                </div>
                <div class="card-body">
                    <table
                        class="table table-bordered text-center align-middle"
                    >
                        <thead class="table-light">
                            <tr>
                                <th>Product</th>
                                <th>Qty</th>
                                <th>Price</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% order.items.forEach(item => { const total =
                            item.price * item.quantity; orderTotal += total; %>
                            <tr>
                                <td><%= item.name %></td>
                                <td><%= item.quantity %></td>
                                <td>$<%= item.price.toFixed(2) %></td>
                                <td>$<%= total.toFixed(2) %></td>
                            </tr>
                            <% }); %>
                        </tbody>
                    </table>
                    <h5 class="text-end mt-3">
                        Order Total:
                        <span class="text-success">
                            $<%= orderTotal.toFixed(2) %>
                        </span>
                    </h5>
                </div>
            </div>
            <% }); %> <% } %>
        </div>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
